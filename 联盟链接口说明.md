# 环境接口
> 以下接口操作适用于联盟链和私链的场合，公链和平行链请参考对应的接口说明文档

## 1 查询节点同步状态
> 更新时间：2019-12-26


#### isSync() 用于查询节点同步状态,返回: true表示同步完成，false表示同步未完成

**函数原型：**

```java
public Boolean isSync()
```

**请求参数：**

|参数|类型|是否必填|说明|
|----|----|----|----|
|null|null|null|null|

**返回字段：**

|返回字段|字段类型|说明|
|----|----|----|
|result|bool|同步状态：true表示同步完成，false表示同步未完成， 建议应用层判断同步完成后再发送交易|

**示例：**

```java
RpcClient client = new RpcClient("localhost", 8801);
System.out.println("is sync:" + client.isSync());
```

**适用场景：**
|公链|联盟链|私链|平行链|
|----|----|----|----|
|√|√|√|×|

# 账户接口
> 更新时间：2019-01-15
## 1 创建账户

#### newAccountLocal

**函数原型：**

```java
public AccountInfo newAccountLocal()
```

**请求参数：**

|参数|类型|是否必填|说明|
|----|----|----|----|
|null|null|null|null|

**返回字段：**

|返回字段|字段类型|说明|
|----|----|----|
|accountInfo|AccountInfo|账户信息，包含私钥，公钥，地址|

**示例：**

```java
AccountInfo accountInfo = account.newAccountLocal();
System.out.println("privateKey is:" + accountInfo.getPrivateKey());
System.out.println("publicKey is:" + accountInfo.getPublicKey());
System.out.println("Address is:" + accountInfo.getAddress());
```

**适用场景：**
|公链|联盟链|私链|平行链|
|----|----|----|----|
|√|√|√|√|


## 2 验证地址

#### validAddress

**函数原型：**

```java
public static boolean validAddress(String address)
```

**请求参数：**

|参数|类型|是否必填|说明|
|----|----|----|----|
|address|string|是|地址|

**返回字段：**

|返回字段|字段类型|说明|
|----|----|----|
|result|bool|地址验证结果|

**示例：**

```java
String address = "1G1L2M1w1c1gpV6SP8tk8gBPGsJe2RfTks";
boolean validAddressResult = TransactionUtil.validAddress(address);
System.out.printf("validate result is:%s", validAddressResult);
```

**适用场景：**
|公链|联盟链|私链|平行链|
|----|----|----|----|
|√|√|√|√|


## 3 转账
> 此处转账只针对联盟链基础积分，此积分在创始区块时就完成初始化,不用手工创建，并且后续不可增发。
> 对于一条确定的链来说，有且只有一种基础积分。 如果要创建多种类不同的积分，可以参考4 token接口

### 3.1 构造并签名转账交易
#### transferBalanceMain

**函数原型：**

```java
public static String transferBalanceMain(TransferBalanceRequest transferBalanceRequest)
```

**请求参数：**

|参数|类型|是否必填|说明|
|----|----|----|----|
|transferBalanceRequest|TransferBalanceRequest|是|构造转账交易的参数|

**示例：**

```java
TransferBalanceRequest transferBalanceRequest = new TransferBalanceRequest();

// 转账说明
transferBalanceRequest.setNote("转账说明");
// 转主积分的情况下，默认填""
transferBalanceRequest.setCoinToken("");
// 转账数量 ， 以下代表转1个积分
transferBalanceRequest.setAmount(1 * 100000000L);
// 转到的地址
transferBalanceRequest.setTo("1CbEVT9RnM5oZhWMj4fxUrJX94VtRotzvs");
// 签名私私钥
transferBalanceRequest.setFromPrivateKey("55637b77b193f2c60c6c3f95d8a5d3a98d15e2d42bf0aeae8e975fc54035e2f4");
// 执行器名称，主链主积分固定为coins
transferBalanceRequest.setExecer("coins");
// 签名类型 (支持SM2, SECP256K1, ED25519)
transferBalanceRequest.setSignType(SignType.SECP256K1);
// 构造好，并本地签好名的交易
String createTransferTx = TransactionUtil.transferBalanceMain(transferBalanceRequest);
System.out.printf("createTransferTx is:%s", createTransferTx);
```

**适用场景：**
|公链|联盟链|私链|平行链|
|----|----|----|----|
|√|√|√|×|

### 3.2 发送交易
> 发送3.1中构造并签好名的交易
#### submitTransaction

**函数原型：**

```java
public String submitTransaction(String data)
```

**请求参数：**

|参数|类型|是否必填|说明|
|----|----|----|----|
|data|String|是|3.1中构造并签好名的交易|

**示例：**

```java
// 交易发往区块链
String txHash = client.submitTransaction(data);
System.out.println(txHash);
```

**适用场景：**
|公链|联盟链|私链|平行链|
|----|----|----|----|
|√|√|√|√|

### 3.3 查询主积分余额
#### getCoinsBalance

**函数原型：**

```java
public List<AccountAccResult> getCoinsBalance(List<String> addresses, String execer)
```

**请求参数：**

|参数|类型|是否必填|说明|
|----|----|----|----|
|addresses|List|是|地址列表|
|execer|String|是|执行器名称：主链主积分情况下，默认为coins|


**示例：**

```java
List<String> list = new ArrayList<>();
list.add("1CbEVT9RnM5oZhWMj4fxUrJX94VtRotzvs");
list.add("1EHWKLEixvfanTHWmnF7mYMuDDXTCorZd7");

QueryTransactionResult queryTransaction1;

List<AccountAccResult> queryBtyBalance;
queryBtyBalance = client.getCoinsBalance(list, "coins");
if (queryBtyBalance != null) {
    for (AccountAccResult accountAccResult : queryBtyBalance) {
        System.out.println(accountAccResult);
    }
```

**适用场景：**
|公链|联盟链|私链|平行链|
|----|----|----|----|
|√|√|√|×|
